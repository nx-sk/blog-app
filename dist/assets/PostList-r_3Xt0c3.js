import{J as d,K as $,M as w,j as e,N as h,O as b,S as P,X as K,Y as U,r as x,U as G,Z as q,$ as ee,b as te,c as se,a0 as ne,w as ae,R as le,f as re,d as oe,B as C,H as M,e as T,L as B,T as L,I as F,a1 as ce,a2 as ie}from"./index-BSHOxWij.js";import{H as de}from"./heading-Bmwyqq1n.js";import{c as O,A as ue,E as he}from"./Edit-BLXXN6aZ.js";import{u as me,I as pe}from"./input-DxyQ8RI6.js";import{M as xe,a as fe,b as je,c as ge,d as ye,e as Se}from"./modal-overlay-DNcbSzXw.js";function be(s,t){const n={},a={};for(const[o,c]of Object.entries(s))t.includes(o)?n[o]=c:a[o]=c;return[n,a]}const W=d(function(t,n){const a=$("Badge",t),{className:o,...c}=w(t);return e.jsx(h.span,{ref:n,className:b("chakra-badge",t.className),...c,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...a}})});W.displayName="Badge";const[Ie,_e]=G({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),V=d(function(t,n){const a=P("Input",t),{children:o,className:c,...l}=w(t),f=b("chakra-input__group",c),u={},g=K(o),m=a.field;g.forEach(i=>{a&&(m&&i.type.id==="InputLeftElement"&&(u.paddingStart=m.height??m.h),m&&i.type.id==="InputRightElement"&&(u.paddingEnd=m.height??m.h),i.type.id==="InputRightAddon"&&(u.borderEndRadius=0),i.type.id==="InputLeftAddon"&&(u.borderStartRadius=0))});const p=g.map(i=>{var j,S;const y=U({size:((j=i.props)==null?void 0:j.size)||t.size,variant:((S=i.props)==null?void 0:S.variant)||t.variant});return i.type.id!=="Input"?x.cloneElement(i,y):x.cloneElement(i,Object.assign(y,u,i.props))});return e.jsx(h.div,{className:f,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...a.group},"data-group":!0,...l,children:e.jsx(Ie,{value:a,children:p})})});V.displayName="InputGroup";const ve=h("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),z=d(function(t,n){const{placement:a="left",...o}=t,c=_e(),l=c.field,u={[a==="left"?"insetStart":"insetEnd"]:"0",width:(l==null?void 0:l.height)??(l==null?void 0:l.h),height:(l==null?void 0:l.height)??(l==null?void 0:l.h),fontSize:l==null?void 0:l.fontSize,...c.element};return e.jsx(ve,{ref:n,__css:u,...o})});z.id="InputElement";z.displayName="InputElement";const A=d(function(t,n){const{className:a,...o}=t,c=b("chakra-input__left-element",a);return e.jsx(z,{ref:n,placement:"left",className:c,...o})});A.id="InputLeftElement";A.displayName="InputLeftElement";const Z=d(function(t,n){const{className:a,...o}=t,c=b("chakra-input__right-element",a);return e.jsx(z,{ref:n,placement:"right",className:c,...o})});Z.id="InputRightElement";Z.displayName="InputRightElement";function Ne(s){const{leastDestructiveRef:t,...n}=s;return e.jsx(xe,{...n,initialFocusRef:t})}const Ee=d((s,t)=>e.jsx(fe,{ref:t,role:"alertdialog",...s})),J=d(function(t,n){const{children:a,placeholder:o,className:c,...l}=t;return e.jsxs(h.select,{...l,ref:n,className:b("chakra-select",c),children:[o&&e.jsx("option",{value:"",children:o}),a]})});J.displayName="SelectField";const Q=d((s,t)=>{var I;const n=P("Select",s),{rootProps:a,placeholder:o,icon:c,color:l,height:f,h:u,minH:g,minHeight:m,iconColor:p,iconSize:i,...y}=w(s),[j,S]=be(y,ee),E=me(S),R={width:"100%",height:"fit-content",position:"relative",color:l},k={paddingEnd:"2rem",...n.field,_focus:{zIndex:"unset",...(I=n.field)==null?void 0:I._focus}};return e.jsxs(h.div,{className:"chakra-select__wrapper",__css:R,...j,...a,children:[e.jsx(J,{ref:t,height:u??f,minH:g??m,placeholder:o,...E,__css:k,children:s.children}),e.jsx(X,{"data-disabled":q(E.disabled),...(p||l)&&{color:p||l},__css:n.icon,...i&&{fontSize:i},children:c})]})});Q.displayName="Select";const Ce=s=>e.jsx("svg",{viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),we=h("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),X=s=>{const{children:t=e.jsx(Ce,{}),...n}=s,a=x.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return e.jsx(we,{...n,className:"chakra-select__icon-wrapper",children:x.isValidElement(t)?a:null})};X.displayName="SelectIcon";const[ze,N]=G({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),Y=d((s,t)=>{const n=P("Table",s),{className:a,layout:o,...c}=w(s);return e.jsx(ze,{value:n,children:e.jsx(h.table,{ref:t,__css:{tableLayout:o,...n.table},className:b("chakra-table",a),...c})})});Y.displayName="Table";const Re=d((s,t)=>{const n=N();return e.jsx(h.tbody,{...s,ref:t,__css:n.tbody})}),_=d(({isNumeric:s,...t},n)=>{const a=N();return e.jsx(h.td,{...t,ref:n,__css:a.td,"data-is-numeric":s})}),v=d(({isNumeric:s,...t},n)=>{const a=N();return e.jsx(h.th,{...t,ref:n,__css:a.th,"data-is-numeric":s})}),ke=d((s,t)=>{const n=N();return e.jsx(h.thead,{...s,ref:t,__css:n.thead})}),H=d((s,t)=>{const n=N();return e.jsx(h.tr,{...s,ref:t,__css:n.tr})}),Me=O({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"}),Te=O({displayName:"DeleteIcon",path:e.jsx("g",{fill:"currentColor",children:e.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),Fe=()=>{const s=te(),{posts:t,loading:n,filters:a}=se(r=>r.posts),{isOpen:o,onOpen:c,onClose:l}=ne(),[f,u]=x.useState(null),[g,m]=x.useState(a.search),[p,i]=x.useState(""),y=ae(),j=le.useRef(null);x.useEffect(()=>{s(re())},[s,a]);const S=r=>{u(r),c()},E=()=>{f&&(s(ie(f)),y({title:"記事を削除しました",status:"success",duration:3e3,isClosable:!0})),u(null),l()},R=r=>{m(r),s(ce({search:r,page:1}))},k=r=>{i(r)},I=r=>new Date(r).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}),D=t.filter(r=>!(p&&r.status!==p));return n?e.jsx(oe,{}):e.jsxs(C,{w:{base:"100%",xl:"1000px"},mr:"auto",children:[e.jsxs(M,{justify:"space-between",align:"center",mb:6,children:[e.jsx(de,{as:"h1",size:"xl",children:"記事管理"}),e.jsx(T,{as:B,to:"/admin/posts/new",colorScheme:"brand",leftIcon:e.jsx(ue,{}),children:"新規記事作成"})]}),e.jsxs(M,{spacing:4,mb:6,className:"crystal-glass crystal-glass--surface",p:3,borderRadius:"md",children:[e.jsxs(V,{maxW:"300px",children:[e.jsx(A,{pointerEvents:"none",children:e.jsx(Me,{color:"gray.300"})}),e.jsx(pe,{placeholder:"記事を検索...",value:g,onChange:r=>R(r.target.value)})]}),e.jsxs(Q,{placeholder:"ステータス",maxW:"150px",value:p,onChange:r=>k(r.target.value),children:[e.jsx("option",{value:"published",children:"公開"}),e.jsx("option",{value:"draft",children:"下書き"})]})]}),D.length===0?e.jsx(C,{textAlign:"center",py:10,children:e.jsx(L,{color:"gray.500",children:"記事がありません"})}):e.jsx(C,{overflowX:"auto",className:"crystal-glass crystal-glass--elevated",p:2,borderRadius:"md",children:e.jsxs(Y,{variant:"simple",children:[e.jsx(ke,{children:e.jsxs(H,{children:[e.jsx(v,{color:"brand.300",children:"タイトル"}),e.jsx(v,{color:"brand.300",children:"ステータス"}),e.jsx(v,{color:"brand.300",children:"作成日"}),e.jsx(v,{color:"brand.300",children:"更新日"}),e.jsx(v,{color:"brand.300",children:"操作"})]})}),e.jsx(Re,{children:D.map(r=>e.jsxs(H,{children:[e.jsx(_,{children:e.jsxs(C,{children:[e.jsx(L,{fontWeight:"bold",noOfLines:1,children:r.title}),r.excerpt&&e.jsx(L,{fontSize:"sm",color:"gray.500",noOfLines:1,children:r.excerpt})]})}),e.jsx(_,{children:e.jsx(W,{colorScheme:r.status==="published"?"green":"yellow",children:r.status==="published"?"公開":"下書き"})}),e.jsx(_,{children:I(r.created_at)}),e.jsx(_,{children:I(r.updated_at)}),e.jsx(_,{children:e.jsxs(M,{spacing:2,children:[e.jsx(F,{as:B,to:`/admin/posts/${r.id}/edit`,"aria-label":"編集",icon:e.jsx(he,{}),size:"sm",variant:"outline"}),e.jsx(F,{"aria-label":"削除",icon:e.jsx(Te,{}),size:"sm",variant:"outline",colorScheme:"red",onClick:()=>S(r.id)})]})})]},r.id))})]})}),e.jsx(Ne,{isOpen:o,leastDestructiveRef:j,onClose:l,children:e.jsx(je,{children:e.jsxs(Ee,{className:"crystal-glass crystal-glass--floating",bg:"transparent",children:[e.jsx(ge,{fontSize:"lg",fontWeight:"bold",children:"記事を削除"}),e.jsx(ye,{children:"この記事を削除してもよろしいですか？この操作は元に戻せません。"}),e.jsxs(Se,{children:[e.jsx(T,{ref:j,onClick:l,children:"キャンセル"}),e.jsx(T,{colorScheme:"red",onClick:E,ml:3,children:"削除"})]})]})})})]})};export{Fe as default};
//# sourceMappingURL=PostList-r_3Xt0c3.js.map
